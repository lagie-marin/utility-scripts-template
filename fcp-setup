#!/bin/bash
# filepath: /home/lagie/.fcp/bin/fcp-setup

echo "Configuration de l'environnement FCP..."

# Crée les répertoires nécessaires
mkdir -p "$HOME/.fcp/bin"

# Vérifie si la configuration est déjà dans .bashrc
if ! grep -q "fimport_completion.bash" "$HOME/.bashrc"; then
    echo -e "\n# Configuration Fast Command Project (FCP)" >> "$HOME/.bashrc"
    echo "if [ -d \"\$HOME/.fcp/bin\" ] ; then" >> "$HOME/.bashrc"
    echo "    export PATH=\"\$HOME/.fcp/bin:\$PATH\"" >> "$HOME/.bashrc"
    echo "fi" >> "$HOME/.bashrc"
    echo "if [ -f \"\$HOME/.fcp/bin/fimport_completion.bash\" ]; then" >> "$HOME/.bashrc"
    echo "    source \"\$HOME/.fcp/bin/fimport_completion.bash\"" >> "$HOME/.bashrc"
    echo "fi" >> "$HOME/.bashrc"
    
    echo "Configuration ajoutée à ~/.bashrc"
else
    echo "Configuration déjà présente dans ~/.bashrc"
fi

echo "Installation terminée. Pour activer l'autocomplétion immédiatement, exécutez:"
echo "  source ~/.bashrc"
echo "  source ~/.fcp/bin/fimport_completion.bash"